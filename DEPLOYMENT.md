# üöÄ Deployment Guide - Contact Manager

## Railway Deployment Steps

### Prerequisites
- Git initialized in your project
- Railway account (sign up at https://railway.app)
- Railway CLI installed (optional but recommended)

### Method 1: Deploy via Railway Dashboard (Recommended)

1. **Push your code to GitHub:**
   ```bash
   git init
   git add .
   git commit -m "Initial commit - Contact Manager with modern UI"
   git branch -M main
   git remote add origin https://github.com/YOUR_USERNAME/contact-manager.git
   git push -u origin main
   ```

2. **Deploy on Railway:**
   - Go to https://railway.app/new
   - Click "Deploy from GitHub repo"
   - Select your `contact-manager` repository
   - Railway will auto-detect it's a Java/Maven project

3. **Add PostgreSQL Database:**
   - In your Railway project, click "+ New"
   - Select "Database" ‚Üí "Add PostgreSQL"
   - Railway will automatically set `DATABASE_URL` environment variable

4. **Configure Environment Variables:**
   Railway automatically provides:
   - `PORT` - Auto-configured
   - `DATABASE_URL` - From PostgreSQL plugin
   
   Additional variables (if needed):
   ```
   SPRING_DATASOURCE_URL=${DATABASE_URL}
   SPRING_DATASOURCE_USERNAME=postgres
   SPRING_DATASOURCE_PASSWORD=<auto-generated>
   ```

5. **Deploy:**
   - Railway will automatically build and deploy
   - Click on your service to get the public URL
   - Your app will be live at: `https://your-app.railway.app`

### Method 2: Deploy via Railway CLI

1. **Install Railway CLI:**
   ```bash
   npm i -g @railway/cli
   ```

2. **Login to Railway:**
   ```bash
   railway login
   ```

3. **Initialize and Link:**
   ```bash
   railway init
   railway link
   ```

4. **Add PostgreSQL:**
   ```bash
   railway add --database postgresql
   ```

5. **Deploy:**
   ```bash
   railway up
   ```

6. **Open your app:**
   ```bash
   railway open
   ```

### Configuration Files Created

- ‚úÖ `railway.json` - Railway deployment configuration
- ‚úÖ `nixpacks.toml` - Build configuration for Java 21
- ‚úÖ `Procfile` - Process configuration
- ‚úÖ `.railwayignore` - Files to exclude from deployment

### Environment Variables (Auto-configured)

Your `application.yaml` is already configured to use these Railway variables:

```yaml
spring:
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:h2:mem:contactdb}
    username: ${SPRING_DATASOURCE_USERNAME:sa}
    password: ${SPRING_DATASOURCE_PASSWORD:}
    driver-class-name: ${SPRING_DATASOURCE_DRIVER:org.h2.Driver}
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: ${SPRING_JPA_HIBERNATE_DIALECT:org.hibernate.dialect.H2Dialect}

server:
  port: ${PORT:8081}
```

### Post-Deployment

1. **Check logs:**
   ```bash
   railway logs
   ```

2. **Access your application:**
   - Your app URL: `https://your-project.railway.app`
   - Swagger UI: `https://your-project.railway.app/swagger-ui.html`

3. **Monitor:**
   - Railway Dashboard shows metrics, logs, and deployments
   - Auto-deploys on git push to main branch

### Troubleshooting

**Build fails:**
- Check Java version (should be 21)
- Verify Maven build locally: `mvn clean package`

**Database connection issues:**
- Ensure PostgreSQL is added to project
- Check environment variables in Railway dashboard

**Port issues:**
- Railway sets `PORT` automatically
- App is configured to use `${PORT:8081}`

### Local Testing Before Deploy

```bash
# Build the application
mvn clean package

# Run locally
java -jar target/contact-manager-0.0.1-SNAPSHOT.jar

# Test at http://localhost:8081
```

---

## üéØ Next Steps After Deployment

1. ‚úÖ Test all CRUD operations
2. ‚úÖ Verify search functionality
3. ‚úÖ Check responsive design on mobile
4. ‚úÖ Test API endpoints via Swagger
5. ‚úÖ Set up custom domain (optional)

## üìù Notes

- Free tier on Railway includes 500 hours/month
- Database persists between deployments
- Auto-deploys on git push (when connected to GitHub)
- Logs available in Railway dashboard
